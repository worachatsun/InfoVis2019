<html>
  <head>
    <meta charset="utf-8" />
    <title>Marching cubes with KVS.js</title>
    <link rel="stylesheet" type="text/css" href="index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <script src="test/Isosurfaces.js"></script>
    <link
      rel="stylesheet"
      href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css"
    />
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  </head>
  <script type="x-shader/x-vertex" id="shader.vert">
    varying vec3 point_position;
    varying vec3 normal_vector;
    varying vec3 point_color;
       void main()
       {
       point_position = (modelViewMatrix * vec4(position, 1.0)).xyz;
    normal_vector = normalMatrix * normal;
    point_color = color;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
       }
  </script>

  <script type="x-shader/x-fragment" id="shader.frag">
    varying vec3 point_color;
    varying vec3 point_position;
    varying vec3 normal_vector;
 uniform vec3 light_position;
 uniform vec3 camera_position;

         vec3 BlinnPhongReflection( vec3 C, vec3 L, vec3 N, vec3 V)
         {
             float ka = 0.3;
             float kd = 0.5;
             float ks = 0.8;
             float n = 50.0;
             vec3 H = (L+V)/length(L+V);
             float dd = max(dot(N,L), 0.0);
             float ds = pow(max(dot(H,N), 0.0), n);
             if ( dd <= 0.0 ) { ds = 0.0; }
             float Ia = ka;
             float Id = kd * dd;
             float Is = ks * ds;
             return C * ( Ia + Id + Is );
         }



                void main()
                {
                vec3 C = point_color;
                vec3 L = normalize(light_position - point_position);
                vec3 N = normalize(normal_vector);
                vec3 V = normalize(camera_position - point_position);
                vec3 point_color = BlinnPhongReflection(C, L, N, V);
                gl_FragColor = vec4( point_color, 1.0 );
                }
  </script>

    <div class="container">
      <div class="title">Lobster Overview</div>
      <div class="section">
        <div
          id="lob_normal"
          class="demo-card-wide mdl-card mdl-shadow--2dp"
        ></div>
        <div class="demo-card-wide mdl-card mdl-shadow--2dp explain">
          <div class="slide">
            <input
              class="mdl-slider mdl-js-slider"
              type="range"
                min="0"
                max="1"
                step="0.01"
                value="0.5"
                id="isovalue"
            />
            <button
              id="change-isovalue-button"
              class="mdl-button mdl-js-button mdl-button--primary"
            >
                <label id="label" style="font-family:Arial;">Isovalue: 128</label>
                apply
            </button>
          </div>
        </div>
      </div>

      <div class="section">
          <div
            id="lob_normal"
            class="demo-card-wide mdl-card mdl-shadow--2dp"
          ></div>
          <div class="demo-card-wide mdl-card mdl-shadow--2dp explain">
            <div class="slide">
              <input
                class="mdl-slider mdl-js-slider"
                type="range"
                  min="0"
                  max="1"
                  step="0.01"
                  value="0.5"
                  id="isovalue"
              />
              <button
                id="change-isovalue-button"
                class="mdl-button mdl-js-button mdl-button--primary"
              >
                  <label id="label" style="font-family:Arial;">Isovalue: 128</label>
                  apply
              </button>
            </div>
          </div>
        </div>
    </div>

    <script src="http://naohisas.github.io/KVS.js/Build/three.min.js"></script>
    <script src="http://naohisas.github.io/KVS.js/Build/TrackballControls.js"></script>
    <script src="http://naohisas.github.io/KVS.js/Build/KVS.min.js"></script>
    <script src="KVS2THREE.min.js"></script>
    <script src="http://naohisas.github.io/KVS.js/Source/KVSLobsterData.js"></script>
    <script src="http://naohisas.github.io/KVS.js/Source/KVSSingleCubeData.js"></script>
    <script src="isosurface.js"></script>
    <script src="streamline.js"></script>
    <script>
      main()
      // streamline()
    </script>
  </body>
</html>
